<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/default}">

<head>
<meta charset="UTF-8">
<title th:text="${title}"></title>
<!-- Custom styles for this template -->
<link href="/css/sb-admin-2.min.css" rel="stylesheet">

<!-- Custom styles for this page -->
<link href="/vendor/datatables/dataTables.bootstrap4.min.css"
	rel="stylesheet">

<!-- Custom styles for this template -->
<link href="/css/sb-admin-2.min.css" rel="stylesheet">

<!-- Custom styles for this page -->
<link href="/vendor/datatables/dataTables.bootstrap4.min.css"
	rel="stylesheet">

</head>
<th:block layout:fragment="customJs">
	<script th:src="@{/js/jquery-3.6.4.js}"></script>

	<script>
		$('#modifysubmitBtn').click(
				function() {
					const userPwEle = $('#modifyuserPw');
					let userPw = userPwEle.val();
					if (typeof userPw == 'undefined' || userPw == null
							|| userPw == '') {
						alert('회원비밀번호를 입력해주세요');
						userPwEle.focus();
						return false;
					}
					$('#modifyUserForm input[name=userPw]').val(userPw);
					$('#modifyUserForm').submit();
				});
		$('#modifyUserForm').ready(function() {
	        var userLevel = '${userInfo.userLevel}'; // 회원의 등급 정보 가져오기

	        // 회원이면 "회원" 옵션 선택, 관리자면 "관리자" 옵션 선택
	        if (userLevel == 2) {
	            $('#modifyuserLevel').val(2); // "회원" 옵션의 value 값인 2로 설정
	        } else if (userLevel == 1) {
	            $('#modifyuserLevel').val(1); // "관리자" 옵션의 value 값인 1로 설정
	        }
	    });
		$('#modifyresetBtn').click(function() {
			location.href = '/user/userList';
			//history.go(-1);
		});
	</script>
</th:block>
<th:block layout:fragment="customContents">

	<!-- Begin Page Content -->
	<div class="container-fluid">

		<!-- Page Heading -->
		<h1 class="h3 mb-4 text-gray-800">회원 정보 수정 관리</h1>
		<p></p>
</th:block>

<th:block layout:fragment="customContents">

	<div class="card shadow mb-4">
		<div class="card-header py-3">
			<h6 class="m-0 font-weight-bold text-primary">회원 정보 수정</h6>
		</div>
		<form id="modifyUserForm" th:action="@{/admin/user/modifyUser}"
			method="post">
			<div class="card-body">
				<div class="table-responsive">

					<table th:object="${userInfo}"
						class="table table-bordered search-table-gr" id="searchTable"
						width="100%" cellspacing="0">
						<tbody>
							<tr>
								<th class="bg-gray-100"><label for="userId">아이디</label></th>
								<td><input type="text"
									class="form-control form-control-user-search search-input-gr"
									id="modifyuserId" th:value="${userInfo.userId}" name="userId"
									readonly="readonly" /></td>
							</tr>
							<tr>
								<th class="bg-gray-100"><label for="userLevel">등급</label></th>
								<td><select class="dropdown btn btn-primary required-form"
									id="modifyuserLevel" name="userLevel">
										<option value="1" th:selected="${userInfo.userLevel == 1}">관리자</option>
            <option value="2" th:selected="${userInfo.userLevel == 2}">회원</option>
								</select></td>
							</tr>

							<tr>
								<th class="bg-gray-100"><label for="userPw">비밀번호</label></th>
								<td><input type="password"
									class="form-control form-control-user-search search-input-gr"
									id="modifyuserPw" th:value="${userInfo.userPw}" name="userPw"
									placeholder="영문+숫자 8~20자 이내" /></td>
							</tr>
							<tr>
								<th class="bg-gray-100"><label for="userName">이름</label></th>
								<td><input type="text"
									class="form-control form-control-user-search search-input-gr"
									id="modifyuserName" th:value="${userInfo.userName}" name="userName"
									placeholder="이름을 입력해주세요." /></td>
							</tr>
							<tr>
								<th class="bg-gray-100"><label for="userBirth">생년월일</label>
								</th>
								<td><input type="date"
									class="form-control form-control-user-search search-input-gr"
									id="modifyuserBirth" th:value="${userInfo.userBirth}" name="userBirth"
									placeholder="생년월일을 선택해주세요." /></td>
							</tr>
							<tr>
								<th class="bg-gray-100"><label for="userPhone">연락처</label>
								</th>
								<td><input type="tel"
									class="form-control form-control-user-search search-input-gr"
									id="modifyuserPhone" th:value="${userInfo.userPhone}" name="userPhone"
									placeholder="하이픈(-)을 포함하여 입력해주세요." /></td>
							</tr>
							<tr>
								<th class="bg-gray-100"><label for="userEmailAgree">이메일
										수신여부</label></th>
								<td><select id="modifyuserEmailAgree" name="userEmailAgree"
									th:value="${userInfo.userEmailAgree}">
										<option value="Y" th:selected="${userEmailAgree == 'Y'}">수신동의</option>

										<option value="N" th:selected="${userEmailAgree == 'N'}">수신거부</option>
								</select></td>

							</tr>
							<tr>
								<th class="bg-gray-100"><label for="userEmail">이메일</label>
								</th>
								<td><input type="email"
									class="form-control form-control-user-search search-input-gr"
									id="modifyuserEmail" th:value="${userInfo.userEmail}" name="userEmail"
									placeholder="at sign(@)을 포함하여 입력해주세요." /></td>
							</tr>
							<tr>
								<th class="bg-gray-100"><label for="userAddr">주소</label></th>
								<td><input type="text"
									class="form-control form-control-user-search search-input-gr"
									id="modifyuserAddr" th:value="${userInfo.userAddr}" name="userAddr"
									placeholder="주소를 입력해주세요." /></td>
							</tr>
							<tr>
								<td colspan="2">
									<button type="button" id="modifysubmitBtn"
										class="btn btn-primary btn-icon-split">
										<span class="icon text-white-50"><i
											class="fas fa-check" aria-hidden="true"></i></span> <span
											class="text">정보수정</span>
									</button>

									<button type="reset" id="modifyresetBtn"
										class="btn btn-secondary btn-icon-split">
										<span class="icon text-white-50"><i
											class="fas fa-trash" aria-hidden="true"></i></span> <span
											class="text">입력취소</span>
									</button>
								</td>
							</tr>
						</tbody>
					</table>
		</form>
		<!-- /.container-fluid -->

		<!-- Scroll to Top Button-->
		<a class="scroll-to-top rounded" href="#page-top"> <i
			class="fas fa-angle-up"></i>
		</a>
</th:block>

<th:block layout:fragment="customJs">
	<!-- Page level plugins -->
	<script th:src="@{/vendor/datatables/jquery.dataTables.min.js}"></script>
	<script th:src="@{/vendor/datatables/dataTables.bootstrap4.min.js}"></script>
	<!-- Page level custom scripts -->
	<script th:src="@{/js/demo/datatables-demo.js}"></script>

</th:block>

</html>
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/default3}">
	
<head>
<meta charset="UTF-8">
<title th:text="${title}"></title>
<!-- Custom styles for this template -->
	<link href="/css/sb-admin-2.min.css" rel="stylesheet">

	<!-- Custom styles for this page -->
	<link href="/vendor/datatables/dataTables.bootstrap4.min.css" rel="stylesheet">

	<!-- Custom styles for this template -->
	<link href="/css/sb-admin-2.min.css" rel="stylesheet">

	<!-- Custom styles for this page -->
	<link href="/vendor/datatables/dataTables.bootstrap4.min.css" rel="stylesheet">

</head>

<th:block layout:fragment="customContents">
	<div class="card shadow mb-4">
			<div class="card-header py-3">
				<h6 class="m-0 font-weight-bold text-success">내 정보 수정</h6>
			</div>
	<form id="modifyUserForm" th:action="@{/user/myPage_myInfoModify}" method="post">
			<div class="card-body">
				<div class="table-responsive">

					<table th:object="${userInfo}"
						class="table table-bordered search-table-gr" id="searchTable"
						width="100%" cellspacing="0">
						<tbody>
							<tr>
								<th class="bg-gray-100"><label for="userId">아이디</label><span class="required-fields">*</span></th>
								<td><input
									type="text"
									class="form-control form-control-user-search search-input-gr"
									id="userId" th:value="${userId}" name="userId"
									 readonly="readonly" /></td>
							</tr>
							
							<tr>
							<tr>
								<th class="bg-gray-100"><label for="userPw">비밀번호</label><span class="required-fields">*</span>
								</th>
								<td><input type="password"
									class="form-control form-control-user-search search-input-gr required-form"
									id="userPw" name="userPw"
									placeholder="영문+숫자 8~20자 이내" /><span class="required-text-pw"></span></td>
							</tr>
								<tr>
								<th class="bg-gray-100"><label for="userPwCheck">비밀번호 확인</label>
								<span class="required-fields">*</span></th>
								<td><input type="password"
									class="form-control form-control-user-search search-input-gr required-form"
									id="userPwCheck" name="userPwCheck"
									placeholder="비밀번호를 한 번 더 입력해주세요" /><span class="required-text-pw"></span></td>
									
							</tr>
							<tr>
								<th class="bg-gray-100"><label for="userName">이름</label><span class="required-fields">*</span>
								</th>
								<td><input type="text"
									class="form-control form-control-user-search search-input-gr"
									id="userName" th:value="${userName}" name="userName"
									readonly="readonly" /></td>
							</tr>
							<tr>
								<th class="bg-gray-100"><label for="userBirth">생년월일</label><span class="required-fields">*</span>
								</th>
								<td><input type="date"
									class="form-control form-control-user-search search-input-gr"
									id="userBirth" th:value="${userBirth}" name="userBirth"
									placeholder="생년월일을 선택해주세요." /></td>
							</tr>
							<tr>
								<th class="bg-gray-100"><label for="userPhone">연락처</label><span class="required-fields">*</span>
								</th>
								<td><input type="tel"
									class="form-control form-control-user-search search-input-gr"
									id="userPhone" th:value="${userPhone}" name="userPhone"
									placeholder="하이픈(-)을 포함하여 입력해주세요." /></td>
							</tr>
				
							<tr>
									<th class="bg-gray-100"><label for="userEmailAgree">이메일
										수신여부</label><span class="required-fields">*</span></th>
								<td><select class="dropdown btn btn-success required-form"
									id="modifyuserEmailAgree" name="userEmailAgree"
									th:value="${userInfo.userEmailAgree}">
										<option value="1" th:selected="${userInfo.userEmailAgree == '1'}">수신동의</option>

										<option value="0" th:selected="${userInfo.userEmailAgree == '0'}">수신거부</option>
								</select><span class="required-text"></span></td>

							</tr>
							
							<tr>
									<th class="bg-gray-100"><label for="userEmail">이메일</label>
									<span class="required-fields">*</span>
								</th>
								<td><input type="email"
									class="form-control form-control-user-search search-input-gr"
									id="userEmail" th:value="${userEmail}" name="userEmail"
									placeholder="at sign(@)을 포함하여 입력해주세요." /></td>
							</tr>
							
							<tr>
									<th class="bg-gray-100"><label for="userPostCode">주소</label></th>
									<td>
										<div class=" align-items-center search-schedule">
											<input type="text"
												class="form-control form-control-user-search search-input-gr-half-two"
												id="userPostCode" name="userPostCode" />
											&nbsp;
											<button type="button" id="checkBtn2" onclick="DaumPostcode()"
												class="btn btn-success btn-icon-split" style="margin-left: -9px;">
												<span class="text">우편번호 찾기</span>
											</button>
											<div style="padding: 5px 0;"></div>
											<input type="text"
												class="form-control form-control-user-search search-input-gr"
												id="userAddrRoad" name="userAddrRoad" />
											<input type="text"
											class="form-control form-control-user-search search-input-gr-half-two"
											id="userExtraAddress" name="userExtraAddress"  />
											<div style="padding: 5px 0;"></div>
											<input type="text"
												class="form-control form-control-user-search search-input-gr"
												id="userAddrDetail" name="userAddrDetail" />
										</div>
									</td>
								</tr>
							
							
							
						</tbody>
					</table>
						<div align="center">
							<button type="button" id="submitBtn" class="btn btn-primary btn-icon-split" style="background-color: #1cc88a;">
								<span class="icon text-white-50"><i class="fas fa-check" aria-hidden="true"></i></span>
								<span class="text">정보수정</span>
							</button>
							<button type="reset" id="resetBtn" class="btn btn-secondary btn-icon-split">
								<span class="icon text-white-50"><i class="fas fa-trash" aria-hidden="true"></i></span>
								<span class="text">입력취소</span>
							</button>
						</div>
	</form>
<!-- /.container-fluid -->

	<!-- Scroll to Top Button-->
	<a class="scroll-to-top rounded" href="#page-top"> <i class="fas fa-angle-up"></i>
	</a>
	
</th:block>

<th:block layout:fragment="customJs">
	<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
	<script>
		function DaumPostcode() {
			new daum.Postcode({
				oncomplete: function (data) {
					// 팝업에서 검색결과 항목을 클릭했을때 실행할 코드를 작성하는 부분.

					// 각 주소의 노출 규칙에 따라 주소를 조합한다.
					// 내려오는 변수가 값이 없는 경우엔 공백('')값을 가지므로, 이를 참고하여 분기 한다.
					var addr = ''; // 주소 변수
					var extraAddr = ''; // 참고항목 변수

					//사용자가 선택한 주소 타입에 따라 해당 주소 값을 가져온다.
					if (data.userSelectedType === 'R') { // 사용자가 도로명 주소를 선택했을 경우
						addr = data.roadAddress;
					} else { // 사용자가 지번 주소를 선택했을 경우(J)
						addr = data.jibunAddress;
					}

					// 사용자가 선택한 주소가 도로명 타입일때 참고항목을 조합한다.
					if (data.userSelectedType === 'R') {
						// 법정동명이 있을 경우 추가한다. (법정리는 제외)
						// 법정동의 경우 마지막 문자가 "동/로/가"로 끝난다.
						if (data.bname !== '' && /[동|로|가]$/g.test(data.bname)) {
							extraAddr += data.bname;
						}
						// 건물명이 있고, 공동주택일 경우 추가한다.
						if (data.buildingName !== '' && data.apartment === 'Y') {
							extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName);
						}
						// 표시할 참고항목이 있을 경우, 괄호까지 추가한 최종 문자열을 만든다.
						if (extraAddr !== '') {
							extraAddr = ' (' + extraAddr + ')';
						}
						// 조합된 참고항목을 해당 필드에 넣는다.
						document.getElementById('userExtraAddress').value = extraAddr;

					} else {
						document.getElementById('userExtraAddress').value = '';
					}

					// 우편번호와 주소 정보를 해당 필드에 넣는다.
					document.getElementById('userPostCode').value = data.zonecode;
					document.getElementById('userAddrRoad').value = addr;
					// 커서를 상세주소 필드로 이동한다.
					document.getElementById('userAddrDetail').focus();
				}
			}).open();
		}
	</script>
				    
				
	<!-- Page level plugins -->
	<script th:src="@{/vendor/datatables/jquery.dataTables.min.js}"></script>
	<script th:src="@{/vendor/datatables/dataTables.bootstrap4.min.js}"></script>
	<!-- Page level custom scripts -->
	<script th:src="@{/js/demo/datatables-demo.js}"></script>          

</th:block>

</html>